# 📊 Metrics 설명서

이 문서는 `eval.py`에서 계산되는 핵심 지표들이 무엇을 의미하는지, 어떤
계산 과정을 거쳐 산출되는지, 그리고 결과를 어떻게 해석해야 하는지를
설명합니다.

현재 포함된 지표는 다음과 같습니다:

-   **MTLD (Measure of Textual Lexical Diversity)**\
-   **MSL (Mean Sentence Length)**\
-   **FKGL (Flesch--Kincaid Grade Level)**

------------------------------------------------------------------------

## 1. MTLD (Measure of Textual Lexical Diversity)

### 정의

-   텍스트의 **어휘 다양성(Lexical Diversity)** 을 측정하는 대표적인
    지표입니다.
-   단순 Type/Token Ratio(TTR, 고유 단어 수 ÷ 전체 단어 수)의
    문제점(텍스트 길이에 민감)을 보완하여 안정적인 값을 제공합니다.

### 계산 과정 (코드 기준)

1.  토큰화(`word_tokens`) → 소문자 알파벳 단어 시퀀스 추출
2.  순방향 계산:
    -   단어를 하나씩 추가하면서 **TTR = (고유 단어 수 ÷ 전체 단어 수)**
        계산
    -   TTR이 **0.72 이하**가 되면 "factor" 하나 종료 → 카운터 리셋
    -   끝에 남은 부분은 보정값으로 factor 수에 반영
3.  역방향 계산:
    -   동일한 과정을 **토큰을 뒤집어서** 다시 수행
4.  최종 MTLD = (순방향 결과 + 역방향 결과) / 2

### 해석

-   **높을수록**: 어휘 사용이 다양하고 반복이 적음
-   **낮을수록**: 어휘 반복도가 높거나 단조로운 문체
-   단, 너무 짧은 텍스트는 신뢰도가 낮을 수 있음

------------------------------------------------------------------------

## 2. MSL (Mean Sentence Length)

### 정의

-   문장 하나당 평균 단어 수를 나타내는 지표입니다.
-   텍스트의 문장 구조적 복잡성과 밀도를 보여줍니다.

### 계산 과정 (코드 기준)

1.  문장 분리(`sentence_split`) → `.`, `!`, `?`, `\n` 등을 경계로 문장
    단위로 나눔\
2.  각 문장마다 단어 수(`word_tokens`) 계산\
3.  문장별 단어 수 평균 = MSL

### 해석

-   **높을수록**: 문장이 길고 복잡한 경향 → 가독성 낮음 가능성
-   **낮을수록**: 짧고 단순한 문장 → 읽기 쉬우나 지나치면 단편적 스타일

------------------------------------------------------------------------

## 3. FKGL (Flesch--Kincaid Grade Level)

### 정의

-   **텍스트 가독성(Readability)** 을 학년 수준(Grade Level)으로
    환산하는 지표.
-   영어권에서 가장 널리 사용되는 지표 중 하나.

### 계산식

$$
FKGL = 0.39 \cdot \frac{W}{S} + 11.8 \cdot \frac{\text{syllables}}{W} - 15.59
$$

- `W`: 전체 단어 수
- `S`: 전체 문장 수
- `syllables`: 전체 음절 수 (코드에서는 모음군 `aeiouy` 기반 휴리스틱
사용)

### 계산 과정 (코드 기준)

1.  문장 수(`sentence_split`)와 단어 수(`word_tokens`) 계산
2.  각 단어의 음절 수(`syllable_count`) 합산
3.  위의 FKGL 공식 적용
4.  (안전 장치)
    -   문장 길이가 비정상적으로 긴 경우(`W/S > 100`) NaN 처리
    -   영어 비율이 낮은 경우 NaN 처리

### 해석

-   **값이 낮을수록**: 읽기 쉽고 쉬운 텍스트 (예: FKGL ≈ 1 → 초등 수준)
-   **값이 높을수록**: 복잡하고 어려운 텍스트 (예: FKGL ≥ 12 → 대학 수준
    이상)

------------------------------------------------------------------------
